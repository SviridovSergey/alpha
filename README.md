# Установка и настройка прокси-сервера и локального сервера

Это руководство поможет вам установить и настроить прокси-сервер, локальный сервер и клиент для полноценной работы проекта.

---

## Предварительные требования

- Python 3.7 или выше
- Установленные библиотеки: `scapy`, `requests`, `asyncio`, `ssl`, `logging`
- OpenSSL (для работы с SSL/TLS)
- NpCap (для работы с библиотекой `scapy`)

---

## Установка зависимостей

### 1. Установите необходимые библиотеки Python

Установите библиотеки с помощью pip:

```bash
pip install scapy requests
```

### 2. Установите OpenSSL

1. Перейдите на сайт [Win32 OpenSSL](https://slproweb.com/products/Win32OpenSSL.html).
2. Скачайте и установите версию, соответствующую вашей операционной системе (например, Win64 OpenSSL v3.x.x).
3. Во время установки выберите опцию **"Copy OpenSSL DLLs to the OpenSSL binaries directory"**.
4. Добавьте путь к OpenSSL в переменную окружения `PATH`:
   - Откройте **Системные свойства** → **Переменные среды**.
   - В разделе **Системные переменные** найдите переменную `PATH` и добавьте путь к папке с OpenSSL (например, `C:\Program Files\OpenSSL-Win64\bin`).

### 3. Установите NpCap

1. Перейдите на сайт [NpCap](https://npcap.com/).
2. Скачайте и установите последнюю версию NpCap.
3. Во время установки выберите опцию **"Install NpCap in WinPcap API-compatible Mode"**.

---

## Настройка проекта

### 1. Создайте папку для проекта

Создайте отдельную папку с названием на английском языке (например, `proxy_project`) и перенесите в нее все файлы проекта:

```
proxy_project/
├── proxy.py
├── proxy_ip.txt
├── proxy_port.txt
├── localserver.py
├── local_server_ip.txt
├── local_server_port.txt
├── client.py
├── cert.pem
├── key.pem
```

### 2. Настройка прокси-сервера

1. Убедитесь, что файлы `proxy_ip.txt` и `proxy_port.txt` содержат списки разрешенных доменов и IP-адресов.
2. Убедитесь, что у вас есть SSL-сертификаты (`cert.pem` и `key.pem`) для работы с HTTPS.

Запустите прокси-сервер:

```bash
python proxy.py
```

### 3. Настройка локального сервера

1. Убедитесь, что файлы `local_server_ip.txt` и `local_server_port.txt` содержат IP-адрес и порт локального сервера.

Запустите локальный сервер:

```bash
python localserver.py
```

### 4. Настройка клиента

Запустите клиент:

```bash
python client.py
```

---

## Логирование

Все логи будут записываться в соответствующие файлы:

- `server_proxy.log` — логи прокси-сервера
- `server.log` — логи локального сервера
- `client.log` — логи клиента

---

## Пример работы

1. Запустите прокси-сервер.
2. Запустите локальный сервер.
3. Запустите клиент.

Клиент будет отправлять пакеты на локальный сервер, который, в свою очередь, будет перенаправлять их через прокси-сервер. Все действия будут логироваться в соответствующие файлы.
